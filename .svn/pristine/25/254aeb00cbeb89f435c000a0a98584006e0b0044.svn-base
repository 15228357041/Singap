<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.mingcloud.proxy.datalayer.dao.archiveinfo.BeiqiTransferMapper" >


  <resultMap id="BaseResultMap" type="BeiqiTransferEntity" >
    <result column="mokey" property="mokey" jdbcType="VARCHAR" />
    <result column="extravarchar18" property="extravarchar18" jdbcType="VARCHAR" />
    <result column="extravarchar20" property="extravarchar20" jdbcType="VARCHAR" />
    <result column="moname" property="moname" jdbcType="VARCHAR" />
    <result column="extramoinfo1" property="extramoinfo1" jdbcType="VARCHAR" />
    <result column="accountid" property="accountid" jdbcType="VARCHAR" />
     <result column="extraid4" property="extraid4" jdbcType="INTEGER" />
    <result column="assetkey" property="assetkey" jdbcType="VARCHAR" />
    <result column="costcenterkey" property="costcenterkey1" jdbcType="VARCHAR" />
    <result column="costcenterkey" property="costcenterkey2" jdbcType="VARCHAR" />
    <result column="rootmoid" property="rootmoid" jdbcType="VARCHAR"/>
    <result column="poskey" property="poskey" jdbcType="VARCHAR"/>
    <result column="contractno" property="contractno" jdbcType="VARCHAR"/>
  </resultMap>
  
  
  <insert id="insert" parameterType="BeiqiTransferEntity" >
    insert into maintenanceobject (
    	mokey,moname,extramoinfo1,assetkey
      )
    values (#{mokey,jdbcType=VARCHAR}, #{moname,jdbcType=VARCHAR}, 
    #{extramoinfo1,jdbcType=VARCHAR}, #{assetkey,jdbcType=VARCHAR}
      )
  </insert>
  
 <update id="update" parameterType="BeiqiTransferEntity" >
    update maintenanceobject
    <set >
      <if test="assetkey != null" >
        assetkey = #{assetkey,jdbcType=VARCHAR}
      </if>
    </set>
    where  mokey = #{mokey,jdbcType=VARCHAR}
  </update>
  
  <!-- 获取输入所需要的所有内容 -->
  <!-- List<SIFATransferEntity> selectAll -->
  <select id="selectAll" resultMap="BaseResultMap">
  	SELECT
  		maintenanceobject.mokey,
  		maintenanceobject.extravarchar18,
  		maintenanceobject.extravarchar20,
  		maintenanceobject.moname,
  		maintenanceobject.extramoinfo1,
  		maintenanceobject.accountid,
  		maintenanceobject.assetkey,
  		maintenanceobject.extraid4,
  		maintenanceobject.rootmoid,
  		maintenanceobject.contractno,
  		position.poskey,
  		c1.costcenterkey AS costcenterkey1,
  		c2.costcenterkey AS costcenterkey2
  	FROM
  		((maintenanceobject LEFT JOIN costcenter c1
  			ON maintenanceobject.accountid=c1.id) LEFT
  		JOIN costcenter c2
  			ON maintenanceobject.extraid4=c2.id) LEFT
  		JOIN position
  			ON maintenanceobject.posid=position.id
  	WHERE
  		length(maintenanceobject.assetkey)&lt;1
  		OR maintenanceobject.assetkey is null
  </select>
  
</mapper>