<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mingcloud.proxy.datalayer.dao.archiveinfo.StockcontrolMapper">

	<resultMap id="entityBeanResult" type="StockcontrolEntity">
		<id column="id" property="id" jdbcType="INTEGER" />
	    <result column="spid" property="spid" jdbcType="INTEGER" />
	    <result column="stockid" property="stockid" jdbcType="INTEGER" />
	    <result column="stocklocationid" property="stocklocationid" jdbcType="INTEGER" />
	    <result column="supplierid" property="supplierid" jdbcType="INTEGER" />
	    <result column="accountid" property="accountid" jdbcType="INTEGER" />
	    <result column="qty" property="qty" jdbcType="DECIMAL" />
	    <result column="stockcontroldatetime" property="stockcontroldatetime" jdbcType="TIMESTAMP" />
	    <result column="checkreorder" property="checkreorder" jdbcType="TINYINT" />
	    <result column="minquantity" property="minquantity" jdbcType="DECIMAL" />
	    <result column="maxquantity" property="maxquantity" jdbcType="DECIMAL" />
	    <result column="autoreorder" property="autoreorder" jdbcType="TINYINT" />
	    <result column="countlock" property="countlock" jdbcType="TINYINT" />
	    <result column="latestcount" property="latestcount" jdbcType="DATE" />
	    <result column="averagepricestock" property="averagepricestock" jdbcType="DECIMAL" />
	    <result column="quantityphysical" property="quantityphysical" jdbcType="DECIMAL" />
	    <result column="quantityeconomical" property="quantityeconomical" jdbcType="DECIMAL" />
	    <result column="quantityatdisp" property="quantityatdisp" jdbcType="DECIMAL" />
	    <result column="quantityreserved" property="quantityreserved" jdbcType="DECIMAL" />
	    <result column="quantityordered" property="quantityordered" jdbcType="DECIMAL" />
	    <result column="abcspare" property="abcspare" jdbcType="VARCHAR" />
	    <result column="stockcontrolbarcode" property="stockcontrolbarcode" jdbcType="BIGINT" />
	    <result column="lastchangedate" property="lastchangedate" jdbcType="DATE" />
	    <result column="lastchangetime" property="lastchangetime" jdbcType="INTEGER" />
	    <result column="relatekey" property="relatekey" jdbcType="VARCHAR" />
	    <result column="lastexportdate" property="lastexportdate" jdbcType="DATE" />
	    <result column="lastexporttime" property="lastexporttime" jdbcType="INTEGER" />
	    <result column="lastimportdate" property="lastimportdate" jdbcType="DATE" />
	    <result column="lastimporttime" property="lastimporttime" jdbcType="INTEGER" />
	    <result column="supplierminquantity" property="supplierminquantity" jdbcType="DECIMAL" />
	    <result column="spname" property="spname" jdbcType="VARCHAR" />
	    <result column="spcodeid" property="spcodeid" jdbcType="INTEGER" />
	    <result column="spgroupid" property="spgroupid" jdbcType="INTEGER" />
	    <result column="autoapproved" property="autoapproved" jdbcType="TINYINT" />
	    <result column="costtypeid" property="costtypeid" jdbcType="INTEGER" />
	    <result column="siteid" property="siteid" jdbcType="INTEGER" />
	    <result column="recordactive" property="recordactive" jdbcType="TINYINT" />
	    <result column="custombarcode" property="custombarcode" jdbcType="VARCHAR" />
	    <result column="quantityreorder" property="quantityreorder" jdbcType="DECIMAL" />
	    <result column="minsupplierquantity" property="minsupplierquantity" jdbcType="DECIMAL" />
	    <result column="minsecurityquantity" property="minsecurityquantity" jdbcType="DECIMAL" />
	    <result column="checksupplierreorder" property="checksupplierreorder" jdbcType="TINYINT" />
	    <result column="quantitypicklist" property="quantitypicklist" jdbcType="DECIMAL" />
	    <result column="quantityrequested" property="quantityrequested" jdbcType="DECIMAL" />
	    <result column="foreignowner" property="foreignowner" jdbcType="TINYINT" />
	    <result column="latestdelivery" property="latestdelivery" jdbcType="DATE" />
	    <result column="latestremoval" property="latestremoval" jdbcType="DATE" />
	    <result column="extrastockctlinfo1" property="extrastockctlinfo1" jdbcType="VARCHAR" />
	    <result column="extrastockctlinfo2" property="extrastockctlinfo2" jdbcType="VARCHAR" />
	    <result column="extrastockctlinfo3" property="extrastockctlinfo3" jdbcType="VARCHAR" />
	    <result column="extrastockctlinfo4" property="extrastockctlinfo4" jdbcType="VARCHAR" />
	    <result column="extrastockctlinfo5" property="extrastockctlinfo5" jdbcType="VARCHAR" />
	    <result column="purchaseactivationdate" property="purchaseactivationdate" jdbcType="DATE" />
	    <result column="purchaseactivationdelay" property="purchaseactivationdelay" jdbcType="INTEGER" />
	    <result column="repairitem" property="repairitem" jdbcType="TINYINT" />
	    <result column="quantityprodrepair" property="quantityprodrepair" jdbcType="DECIMAL" />
	    <result column="virtualstockrecord" property="virtualstockrecord" jdbcType="TINYINT" />
	    <result column="plantid" property="plantid" jdbcType="INTEGER" />
	    <result column="legalunitid" property="legalunitid" jdbcType="INTEGER" />
	    <result column="legalunitcurrencykey" property="legalunitcurrencykey" jdbcType="VARCHAR" />
	    <result column="classid" property="classid" jdbcType="INTEGER" />
	    <result column="lastchangedtz" property="lastchangedtz" jdbcType="TIMESTAMP" />
	    <result column="lastexportdtz" property="lastexportdtz" jdbcType="TIMESTAMP" />
	    <result column="lastimportdtz" property="lastimportdtz" jdbcType="TIMESTAMP" />
	    <result column="latestcountdtz" property="latestcountdtz" jdbcType="TIMESTAMP" />
	    <result column="latestdeliverydtz" property="latestdeliverydtz" jdbcType="TIMESTAMP" />
	    <result column="latestremovaldtz" property="latestremovaldtz" jdbcType="TIMESTAMP" />
	    <result column="recordlanguageid" property="recordlanguageid" jdbcType="INTEGER" />
	    <result column="createdate" property="createdate" jdbcType="TIMESTAMP" />
	    <result column="createuserid" property="createuserid" jdbcType="INTEGER" />
	    <result column="modificationdate" property="modificationdate" jdbcType="TIMESTAMP" />
	    <result column="modificationuserid" property="modificationuserid" jdbcType="INTEGER" />
	    <result column="picpath" property="picpath" jdbcType="VARCHAR" />
	    <result column="barcode" property="barcode" jdbcType="VARCHAR" />
	    <result column="memo" property="memo" jdbcType="VARCHAR" />
	    <result column="orgid" property="orgid" jdbcType="INTEGER" />
	</resultMap>
	
	<resultMap id="entityBeanResult_ex" type="StockcontrolEntity">
		<id column="id" property="id" jdbcType="INTEGER" />
	    <result column="spid" property="spid" jdbcType="INTEGER" />
	    <result column="stockid" property="stockid" jdbcType="INTEGER" />
	    <result column="qty" property="qty" jdbcType="DECIMAL" />
	</resultMap>
	
	<sql id="table_name">
		stockcontrol
	</sql>

	<sql id="table_id">
		id
	</sql>
	
	<sql id="database_table_columns_ex">
		<include refid="table_name"/>.id,
		<include refid="table_name"/>.qty
	</sql>

	<!-- table columns -->
	<sql id="database_table_columns">
		id, spid, stockid, stocklocationid, supplierid, accountid, qty, stockcontroldatetime, 
	    checkreorder, minquantity, maxquantity, autoreorder, countlock, latestcount, averagepricestock, 
	    quantityphysical, quantityeconomical, quantityatdisp, quantityreserved, quantityordered, 
	    abcspare, stockcontrolbarcode, lastchangedate, lastchangetime, relatekey, lastexportdate, 
	    lastexporttime, lastimportdate, lastimporttime, supplierminquantity, spname, spcodeid, 
	    spgroupid, autoapproved, costtypeid, siteid, recordactive, custombarcode, quantityreorder, 
	    minsupplierquantity, minsecurityquantity, checksupplierreorder, quantitypicklist, 
	    quantityrequested, foreignowner, latestdelivery, latestremoval, extrastockctlinfo1, 
	    extrastockctlinfo2, extrastockctlinfo3, extrastockctlinfo4, extrastockctlinfo5, purchaseactivationdate, 
	    purchaseactivationdelay, repairitem, quantityprodrepair, virtualstockrecord, plantid, 
	    legalunitid, legalunitcurrencykey, classid, lastchangedtz, lastexportdtz, lastimportdtz, 
	    latestcountdtz, latestdeliverydtz, latestremovaldtz, recordlanguageid, createdate, 
	    createuserid, modificationdate, modificationuserid, picpath, barcode, memo, orgid
	</sql>
    
    <select id="checkStock" resultMap="entityBeanResult_ex">
		SELECT <include refid="database_table_columns_ex"/>
		FROM stock, stockcontrol, sparepart
		WHERE stockcontrol.stockid = stock.id 
		AND stockcontrol.spid = sparepart.id 
		AND sparepart.sparepartkey = #{0} 
		AND stock.stockkey = #{1}
	</select>
	
	<select id="get" resultMap="entityBeanResult_ex">
		SELECT <include refid="database_table_columns_ex"/>
		FROM stockcontrol
		WHERE 
		spid = #{spid,jdbcType=INTEGER} and stockid = #{stockid,jdbcType=INTEGER}
	</select>
	
	<update id="update" >
		update
		<include refid="table_name" />
		<set>		 
			  <if test="spid != null" >
		         spid = #{spid,jdbcType=INTEGER},
		      </if>
		      <if test="stockid != null" >
		         stockid = #{stockid,jdbcType=INTEGER},
		      </if>
		      <if test="stocklocationid != null" >
		         stocklocationid = #{stocklocationid,jdbcType=INTEGER},
		      </if>
		      <if test="supplierid != null" >
		         supplierid = #{supplierid,jdbcType=INTEGER},
		      </if>
		      <if test="accountid != null" >
		         accountid = #{accountid,jdbcType=INTEGER},
		      </if>
		      <if test="qty != null" >
		         qty = #{qty,jdbcType=DECIMAL},
		      </if>
		      <if test="stockcontroldatetime != null" >
		         stockcontroldatetime = #{stockcontroldatetime,jdbcType=TIMESTAMP},
		      </if>
		      <if test="checkreorder != null" >
		         checkreorder = #{checkreorder,jdbcType=TINYINT},
		      </if>
		      <if test="minquantity != null" >
		         minquantity = #{minquantity,jdbcType=DECIMAL},
		      </if>
		      <if test="maxquantity != null" >
		         maxquantity = #{maxquantity,jdbcType=DECIMAL},
		      </if>
		      <if test="autoreorder != null" >
		         autoreorder = #{autoreorder,jdbcType=TINYINT},
		      </if>
		      <if test="countlock != null" >
		         countlock = #{countlock,jdbcType=TINYINT},
		      </if>
		      <if test="latestcount != null" >
		         latestcount = #{latestcount,jdbcType=DATE},
		      </if>
		      <if test="averagepricestock != null" >
		         averagepricestock = #{averagepricestock,jdbcType=DECIMAL},
		      </if>
		      <if test="quantityphysical != null" >
		         quantityphysical = #{quantityphysical,jdbcType=DECIMAL},
		      </if>
		      <if test="quantityeconomical != null" >
		         quantityeconomical = #{quantityeconomical,jdbcType=DECIMAL},
		      </if>
		      <if test="quantityatdisp != null" >
		         quantityatdisp = #{quantityatdisp,jdbcType=DECIMAL},
		      </if>
		      <if test="quantityreserved != null" >
		         quantityreserved = #{quantityreserved,jdbcType=DECIMAL},
		      </if>
		      <if test="quantityordered != null" >
		         quantityordered = #{quantityordered,jdbcType=DECIMAL},
		      </if>
		      <if test="abcspare != null" >
		         abcspare = #{abcspare,jdbcType=VARCHAR},
		      </if>
		      <if test="stockcontrolbarcode != null" >
		         stockcontrolbarcode = #{stockcontrolbarcode,jdbcType=BIGINT},
		      </if>
		      <if test="lastchangedate != null" >
		         lastchangedate = #{lastchangedate,jdbcType=DATE},
		      </if>
		      <if test="lastchangetime != null" >
		         lastchangetime = #{lastchangetime,jdbcType=INTEGER},
		      </if>
		      <if test="relatekey != null" >
		         relatekey = #{relatekey,jdbcType=VARCHAR},
		      </if>
		      <if test="lastexportdate != null" >
		         lastexportdate = #{lastexportdate,jdbcType=DATE},
		      </if>
		      <if test="lastexporttime != null" >
		         lastexporttime = #{lastexporttime,jdbcType=INTEGER},
		      </if>
		      <if test="lastimportdate != null" >
		         lastimportdate = #{lastimportdate,jdbcType=DATE},
		      </if>
		      <if test="lastimporttime != null" >
		         lastimporttime = #{lastimporttime,jdbcType=INTEGER},
		      </if>
		      <if test="supplierminquantity != null" >
		         supplierminquantity = #{supplierminquantity,jdbcType=DECIMAL},
		      </if>
		      <if test="spname != null" >
		         spname = #{spname,jdbcType=VARCHAR},
		      </if>
		      <if test="spcodeid != null" >
		         spcodeid = #{spcodeid,jdbcType=INTEGER},
		      </if>
		      <if test="spgroupid != null" >
		         spgroupid = #{spgroupid,jdbcType=INTEGER},
		      </if>
		      <if test="autoapproved != null" >
		         autoapproved = #{autoapproved,jdbcType=TINYINT},
		      </if>
		      <if test="costtypeid != null" >
		        costtypeid = #{costtypeid,jdbcType=INTEGER},
		      </if>
		      <if test="siteid != null" >
		         siteid = #{siteid,jdbcType=INTEGER},
		      </if>
		      <if test="recordactive != null" >
		         recordactive = #{recordactive,jdbcType=TINYINT},
		      </if>
		      <if test="custombarcode != null" >
		         custombarcode = #{custombarcode,jdbcType=VARCHAR},
		      </if>
		      <if test="quantityreorder != null" >
		         quantityreorder = #{quantityreorder,jdbcType=DECIMAL},
		      </if>
		      <if test="minsupplierquantity != null" >
		         minsupplierquantity = #{minsupplierquantity,jdbcType=DECIMAL},
		      </if>
		      <if test="minsecurityquantity != null" >
		         minsecurityquantity = #{minsecurityquantity,jdbcType=DECIMAL},
		      </if>
		      <if test="checksupplierreorder != null" >
		         checksupplierreorder = #{checksupplierreorder,jdbcType=TINYINT},
		      </if>
		      <if test="quantitypicklist != null" >
		         quantitypicklist = #{quantitypicklist,jdbcType=DECIMAL},
		      </if>
		      <if test="quantityrequested != null" >
		         quantityrequested = #{quantityrequested,jdbcType=DECIMAL},
		      </if>
		      <if test="foreignowner != null" >
		         foreignowner = #{foreignowner,jdbcType=TINYINT},
		      </if>
		      <if test="latestdelivery != null" >
		         latestdelivery = #{latestdelivery,jdbcType=DATE},
		      </if>
		      <if test="latestremoval != null" >
		         latestremoval = #{latestremoval,jdbcType=DATE},
		      </if>
		      <if test="extrastockctlinfo1 != null" >
		         extrastockctlinfo1 = #{extrastockctlinfo1,jdbcType=VARCHAR},
		      </if>
		      <if test="extrastockctlinfo2 != null" >
		         extrastockctlinfo2 = #{extrastockctlinfo2,jdbcType=VARCHAR},
		      </if>
		      <if test="extrastockctlinfo3 != null" >
		         extrastockctlinfo3 = #{extrastockctlinfo3,jdbcType=VARCHAR},
		      </if>
		      <if test="extrastockctlinfo4 != null" >
		         extrastockctlinfo4 = #{extrastockctlinfo4,jdbcType=VARCHAR},
		      </if>
		      <if test="extrastockctlinfo5 != null" >
		         extrastockctlinfo5 = #{extrastockctlinfo5,jdbcType=VARCHAR},
		      </if>
		      <if test="purchaseactivationdate != null" >
		         purchaseactivationdate = #{purchaseactivationdate,jdbcType=DATE},
		      </if>
		      <if test="purchaseactivationdelay != null" >
		         purchaseactivationdelay = #{purchaseactivationdelay,jdbcType=INTEGER},
		      </if>
		      <if test="repairitem != null" >
		         repairitem = #{repairitem,jdbcType=TINYINT},
		      </if>
		      <if test="quantityprodrepair != null" >
		         quantityprodrepair = #{quantityprodrepair,jdbcType=DECIMAL},
		      </if>
		      <if test="virtualstockrecord != null" >
		         virtualstockrecord = #{virtualstockrecord,jdbcType=TINYINT},
		      </if>
		      <if test="plantid != null" >
		         plantid = #{plantid,jdbcType=INTEGER},
		      </if>
		      <if test="legalunitid != null" >
		         legalunitid = #{legalunitid,jdbcType=INTEGER},
		      </if>
		      <if test="legalunitcurrencykey != null" >
		         legalunitcurrencykey = #{legalunitcurrencykey,jdbcType=VARCHAR},
		      </if>
		      <if test="classid != null" >
		         classid = #{classid,jdbcType=INTEGER},
		      </if>
		      <if test="lastchangedtz != null" >
		         lastchangedtz = #{lastchangedtz,jdbcType=TIMESTAMP},
		      </if>
		      <if test="lastexportdtz != null" >
		         lastexportdtz = #{lastexportdtz,jdbcType=TIMESTAMP},
		      </if>
		      <if test="lastimportdtz != null" >
		         lastimportdtz = #{lastimportdtz,jdbcType=TIMESTAMP},
		      </if>
		      <if test="latestcountdtz != null" >
		         latestcountdtz = #{latestcountdtz,jdbcType=TIMESTAMP},
		      </if>
		      <if test="latestdeliverydtz != null" >
		         latestdeliverydtz = #{latestdeliverydtz,jdbcType=TIMESTAMP},
		      </if>
		      <if test="latestremovaldtz != null" >
		         latestremovaldtz = #{latestremovaldtz,jdbcType=TIMESTAMP},
		      </if>
		      <if test="recordlanguageid != null" >
		         recordlanguageid = #{recordlanguageid,jdbcType=INTEGER},
		      </if>
		      <if test="createdate != null" >
		         createdate = #{createdate,jdbcType=TIMESTAMP},
		      </if>
		      <if test="createuserid != null" >
		         createuserid = #{createuserid,jdbcType=INTEGER},
		      </if>
		      <if test="modificationdate != null" >
		         modificationdate = #{modificationdate,jdbcType=TIMESTAMP},
		      </if>
		      <if test="modificationuserid != null" >
		         modificationuserid = #{modificationuserid,jdbcType=INTEGER},
		      </if>
		      <if test="picpath != null" >
		         picpath = #{picpath,jdbcType=VARCHAR},
		      </if>
		      <if test="barcode != null" >
		         barcode = #{barcode,jdbcType=VARCHAR},
		      </if>
		      <if test="memo != null" >
		         memo = #{memo,jdbcType=VARCHAR},
		      </if>
		      <if test="orgid != null" >
		         orgid = #{orgid,jdbcType=INTEGER},
		      </if>
		</set>
		where
		<include refid="table_id" />
		= #{id,jdbcType=INTEGER}
	</update>
    
    <update id="updateQty" parameterType="StockcontrolEntity">
		update
		<include refid="table_name" />
		<set>		 
			<if test="modificationdate != null" >
		        modificationdate = #{modificationdate,jdbcType=TIMESTAMP},
		    </if>
			qty = #{qty,jdbcType=DECIMAL}
		</set>
		where
		spid = #{spid,jdbcType=INTEGER} and stockid = #{stockid,jdbcType=INTEGER}
	</update>
	
	<insert id="insert">
		insert into stockcontrol
	    <trim prefix="(" suffix=")" suffixOverrides="," >
	      <if test="id != null" >
	        id,
	      </if>
	      <if test="spid != null" >
	        spid,
	      </if>
	      <if test="stockid != null" >
	        stockid,
	      </if>
	      <if test="stocklocationid != null" >
	        stocklocationid,
	      </if>
	      <if test="supplierid != null" >
	        supplierid,
	      </if>
	      <if test="accountid != null" >
	        accountid,
	      </if>
	      <if test="qty != null" >
	        qty,
	      </if>
	      <if test="stockcontroldatetime != null" >
	        stockcontroldatetime,
	      </if>
	      <if test="checkreorder != null" >
	        checkreorder,
	      </if>
	      <if test="minquantity != null" >
	        minquantity,
	      </if>
	      <if test="maxquantity != null" >
	        maxquantity,
	      </if>
	      <if test="autoreorder != null" >
	        autoreorder,
	      </if>
	      <if test="countlock != null" >
	        countlock,
	      </if>
	      <if test="latestcount != null" >
	        latestcount,
	      </if>
	      <if test="averagepricestock != null" >
	        averagepricestock,
	      </if>
	      <if test="quantityphysical != null" >
	        quantityphysical,
	      </if>
	      <if test="quantityeconomical != null" >
	        quantityeconomical,
	      </if>
	      <if test="quantityatdisp != null" >
	        quantityatdisp,
	      </if>
	      <if test="quantityreserved != null" >
	        quantityreserved,
	      </if>
	      <if test="quantityordered != null" >
	        quantityordered,
	      </if>
	      <if test="abcspare != null" >
	        abcspare,
	      </if>
	      <if test="stockcontrolbarcode != null" >
	        stockcontrolbarcode,
	      </if>
	      <if test="lastchangedate != null" >
	        lastchangedate,
	      </if>
	      <if test="lastchangetime != null" >
	        lastchangetime,
	      </if>
	      <if test="relatekey != null" >
	        relatekey,
	      </if>
	      <if test="lastexportdate != null" >
	        lastexportdate,
	      </if>
	      <if test="lastexporttime != null" >
	        lastexporttime,
	      </if>
	      <if test="lastimportdate != null" >
	        lastimportdate,
	      </if>
	      <if test="lastimporttime != null" >
	        lastimporttime,
	      </if>
	      <if test="supplierminquantity != null" >
	        supplierminquantity,
	      </if>
	      <if test="spname != null" >
	        spname,
	      </if>
	      <if test="spcodeid != null" >
	        spcodeid,
	      </if>
	      <if test="spgroupid != null" >
	        spgroupid,
	      </if>
	      <if test="autoapproved != null" >
	        autoapproved,
	      </if>
	      <if test="costtypeid != null" >
	        costtypeid,
	      </if>
	      <if test="siteid != null" >
	        siteid,
	      </if>
	      <if test="recordactive != null" >
	        recordactive,
	      </if>
	      <if test="custombarcode != null" >
	        custombarcode,
	      </if>
	      <if test="quantityreorder != null" >
	        quantityreorder,
	      </if>
	      <if test="minsupplierquantity != null" >
	        minsupplierquantity,
	      </if>
	      <if test="minsecurityquantity != null" >
	        minsecurityquantity,
	      </if>
	      <if test="checksupplierreorder != null" >
	        checksupplierreorder,
	      </if>
	      <if test="quantitypicklist != null" >
	        quantitypicklist,
	      </if>
	      <if test="quantityrequested != null" >
	        quantityrequested,
	      </if>
	      <if test="foreignowner != null" >
	        foreignowner,
	      </if>
	      <if test="latestdelivery != null" >
	        latestdelivery,
	      </if>
	      <if test="latestremoval != null" >
	        latestremoval,
	      </if>
	      <if test="extrastockctlinfo1 != null" >
	        extrastockctlinfo1,
	      </if>
	      <if test="extrastockctlinfo2 != null" >
	        extrastockctlinfo2,
	      </if>
	      <if test="extrastockctlinfo3 != null" >
	        extrastockctlinfo3,
	      </if>
	      <if test="extrastockctlinfo4 != null" >
	        extrastockctlinfo4,
	      </if>
	      <if test="extrastockctlinfo5 != null" >
	        extrastockctlinfo5,
	      </if>
	      <if test="purchaseactivationdate != null" >
	        purchaseactivationdate,
	      </if>
	      <if test="purchaseactivationdelay != null" >
	        purchaseactivationdelay,
	      </if>
	      <if test="repairitem != null" >
	        repairitem,
	      </if>
	      <if test="quantityprodrepair != null" >
	        quantityprodrepair,
	      </if>
	      <if test="virtualstockrecord != null" >
	        virtualstockrecord,
	      </if>
	      <if test="plantid != null" >
	        plantid,
	      </if>
	      <if test="legalunitid != null" >
	        legalunitid,
	      </if>
	      <if test="legalunitcurrencykey != null" >
	        legalunitcurrencykey,
	      </if>
	      <if test="classid != null" >
	        classid,
	      </if>
	      <if test="lastchangedtz != null" >
	        lastchangedtz,
	      </if>
	      <if test="lastexportdtz != null" >
	        lastexportdtz,
	      </if>
	      <if test="lastimportdtz != null" >
	        lastimportdtz,
	      </if>
	      <if test="latestcountdtz != null" >
	        latestcountdtz,
	      </if>
	      <if test="latestdeliverydtz != null" >
	        latestdeliverydtz,
	      </if>
	      <if test="latestremovaldtz != null" >
	        latestremovaldtz,
	      </if>
	      <if test="recordlanguageid != null" >
	        recordlanguageid,
	      </if>
	      <if test="createdate != null" >
	        createdate,
	      </if>
	      <if test="createuserid != null" >
	        createuserid,
	      </if>
	      <if test="modificationdate != null" >
	        modificationdate,
	      </if>
	      <if test="modificationuserid != null" >
	        modificationuserid,
	      </if>
	      <if test="picpath != null" >
	        picpath,
	      </if>
	      <if test="barcode != null" >
	        barcode,
	      </if>
	      <if test="memo != null" >
	        memo,
	      </if>
	      <if test="orgid != null" >
	        orgid,
	      </if>
	    </trim>
	    <trim prefix="values (" suffix=")" suffixOverrides="," >
	      <if test="id != null" >
	        #{id,jdbcType=INTEGER},
	      </if>
	      <if test="spid != null" >
	        #{spid,jdbcType=INTEGER},
	      </if>
	      <if test="stockid != null" >
	        #{stockid,jdbcType=INTEGER},
	      </if>
	      <if test="stocklocationid != null" >
	        #{stocklocationid,jdbcType=INTEGER},
	      </if>
	      <if test="supplierid != null" >
	        #{supplierid,jdbcType=INTEGER},
	      </if>
	      <if test="accountid != null" >
	        #{accountid,jdbcType=INTEGER},
	      </if>
	      <if test="qty != null" >
	        #{qty,jdbcType=DECIMAL},
	      </if>
	      <if test="stockcontroldatetime != null" >
	        #{stockcontroldatetime,jdbcType=TIMESTAMP},
	      </if>
	      <if test="checkreorder != null" >
	        #{checkreorder,jdbcType=TINYINT},
	      </if>
	      <if test="minquantity != null" >
	        #{minquantity,jdbcType=DECIMAL},
	      </if>
	      <if test="maxquantity != null" >
	        #{maxquantity,jdbcType=DECIMAL},
	      </if>
	      <if test="autoreorder != null" >
	        #{autoreorder,jdbcType=TINYINT},
	      </if>
	      <if test="countlock != null" >
	        #{countlock,jdbcType=TINYINT},
	      </if>
	      <if test="latestcount != null" >
	        #{latestcount,jdbcType=DATE},
	      </if>
	      <if test="averagepricestock != null" >
	        #{averagepricestock,jdbcType=DECIMAL},
	      </if>
	      <if test="quantityphysical != null" >
	        #{quantityphysical,jdbcType=DECIMAL},
	      </if>
	      <if test="quantityeconomical != null" >
	        #{quantityeconomical,jdbcType=DECIMAL},
	      </if>
	      <if test="quantityatdisp != null" >
	        #{quantityatdisp,jdbcType=DECIMAL},
	      </if>
	      <if test="quantityreserved != null" >
	        #{quantityreserved,jdbcType=DECIMAL},
	      </if>
	      <if test="quantityordered != null" >
	        #{quantityordered,jdbcType=DECIMAL},
	      </if>
	      <if test="abcspare != null" >
	        #{abcspare,jdbcType=VARCHAR},
	      </if>
	      <if test="stockcontrolbarcode != null" >
	        #{stockcontrolbarcode,jdbcType=BIGINT},
	      </if>
	      <if test="lastchangedate != null" >
	        #{lastchangedate,jdbcType=DATE},
	      </if>
	      <if test="lastchangetime != null" >
	        #{lastchangetime,jdbcType=INTEGER},
	      </if>
	      <if test="relatekey != null" >
	        #{relatekey,jdbcType=VARCHAR},
	      </if>
	      <if test="lastexportdate != null" >
	        #{lastexportdate,jdbcType=DATE},
	      </if>
	      <if test="lastexporttime != null" >
	        #{lastexporttime,jdbcType=INTEGER},
	      </if>
	      <if test="lastimportdate != null" >
	        #{lastimportdate,jdbcType=DATE},
	      </if>
	      <if test="lastimporttime != null" >
	        #{lastimporttime,jdbcType=INTEGER},
	      </if>
	      <if test="supplierminquantity != null" >
	        #{supplierminquantity,jdbcType=DECIMAL},
	      </if>
	      <if test="spname != null" >
	        #{spname,jdbcType=VARCHAR},
	      </if>
	      <if test="spcodeid != null" >
	        #{spcodeid,jdbcType=INTEGER},
	      </if>
	      <if test="spgroupid != null" >
	        #{spgroupid,jdbcType=INTEGER},
	      </if>
	      <if test="autoapproved != null" >
	        #{autoapproved,jdbcType=TINYINT},
	      </if>
	      <if test="costtypeid != null" >
	        #{costtypeid,jdbcType=INTEGER},
	      </if>
	      <if test="siteid != null" >
	        #{siteid,jdbcType=INTEGER},
	      </if>
	      <if test="recordactive != null" >
	        #{recordactive,jdbcType=TINYINT},
	      </if>
	      <if test="custombarcode != null" >
	        #{custombarcode,jdbcType=VARCHAR},
	      </if>
	      <if test="quantityreorder != null" >
	        #{quantityreorder,jdbcType=DECIMAL},
	      </if>
	      <if test="minsupplierquantity != null" >
	        #{minsupplierquantity,jdbcType=DECIMAL},
	      </if>
	      <if test="minsecurityquantity != null" >
	        #{minsecurityquantity,jdbcType=DECIMAL},
	      </if>
	      <if test="checksupplierreorder != null" >
	        #{checksupplierreorder,jdbcType=TINYINT},
	      </if>
	      <if test="quantitypicklist != null" >
	        #{quantitypicklist,jdbcType=DECIMAL},
	      </if>
	      <if test="quantityrequested != null" >
	        #{quantityrequested,jdbcType=DECIMAL},
	      </if>
	      <if test="foreignowner != null" >
	        #{foreignowner,jdbcType=TINYINT},
	      </if>
	      <if test="latestdelivery != null" >
	        #{latestdelivery,jdbcType=DATE},
	      </if>
	      <if test="latestremoval != null" >
	        #{latestremoval,jdbcType=DATE},
	      </if>
	      <if test="extrastockctlinfo1 != null" >
	        #{extrastockctlinfo1,jdbcType=VARCHAR},
	      </if>
	      <if test="extrastockctlinfo2 != null" >
	        #{extrastockctlinfo2,jdbcType=VARCHAR},
	      </if>
	      <if test="extrastockctlinfo3 != null" >
	        #{extrastockctlinfo3,jdbcType=VARCHAR},
	      </if>
	      <if test="extrastockctlinfo4 != null" >
	        #{extrastockctlinfo4,jdbcType=VARCHAR},
	      </if>
	      <if test="extrastockctlinfo5 != null" >
	        #{extrastockctlinfo5,jdbcType=VARCHAR},
	      </if>
	      <if test="purchaseactivationdate != null" >
	        #{purchaseactivationdate,jdbcType=DATE},
	      </if>
	      <if test="purchaseactivationdelay != null" >
	        #{purchaseactivationdelay,jdbcType=INTEGER},
	      </if>
	      <if test="repairitem != null" >
	        #{repairitem,jdbcType=TINYINT},
	      </if>
	      <if test="quantityprodrepair != null" >
	        #{quantityprodrepair,jdbcType=DECIMAL},
	      </if>
	      <if test="virtualstockrecord != null" >
	        #{virtualstockrecord,jdbcType=TINYINT},
	      </if>
	      <if test="plantid != null" >
	        #{plantid,jdbcType=INTEGER},
	      </if>
	      <if test="legalunitid != null" >
	        #{legalunitid,jdbcType=INTEGER},
	      </if>
	      <if test="legalunitcurrencykey != null" >
	        #{legalunitcurrencykey,jdbcType=VARCHAR},
	      </if>
	      <if test="classid != null" >
	        #{classid,jdbcType=INTEGER},
	      </if>
	      <if test="lastchangedtz != null" >
	        #{lastchangedtz,jdbcType=TIMESTAMP},
	      </if>
	      <if test="lastexportdtz != null" >
	        #{lastexportdtz,jdbcType=TIMESTAMP},
	      </if>
	      <if test="lastimportdtz != null" >
	        #{lastimportdtz,jdbcType=TIMESTAMP},
	      </if>
	      <if test="latestcountdtz != null" >
	        #{latestcountdtz,jdbcType=TIMESTAMP},
	      </if>
	      <if test="latestdeliverydtz != null" >
	        #{latestdeliverydtz,jdbcType=TIMESTAMP},
	      </if>
	      <if test="latestremovaldtz != null" >
	        #{latestremovaldtz,jdbcType=TIMESTAMP},
	      </if>
	      <if test="recordlanguageid != null" >
	        #{recordlanguageid,jdbcType=INTEGER},
	      </if>
	      <if test="createdate != null" >
	        #{createdate,jdbcType=TIMESTAMP},
	      </if>
	      <if test="createuserid != null" >
	        #{createuserid,jdbcType=INTEGER},
	      </if>
	      <if test="modificationdate != null" >
	        #{modificationdate,jdbcType=TIMESTAMP},
	      </if>
	      <if test="modificationuserid != null" >
	        #{modificationuserid,jdbcType=INTEGER},
	      </if>
	      <if test="picpath != null" >
	        #{picpath,jdbcType=VARCHAR},
	      </if>
	      <if test="barcode != null" >
	        #{barcode,jdbcType=VARCHAR},
	      </if>
	      <if test="memo != null" >
	        #{memo,jdbcType=VARCHAR},
	      </if>
	      <if test="orgid != null" >
	        #{orgid,jdbcType=INTEGER},
	      </if>
	    </trim>
	</insert>
    
    <insert id="insertStock">
		insert into
		<include refid="table_name" />
		(spid, stockid, qty, createdate)
		SELECT sparepart.id, stock.id, #{0}, #{1}
		FROM sparepart, stock
		WHERE sparepart.sparepartkey = #{2} 
		AND stock.stockkey = #{3}
	</insert>

	<select id="selectKeyIdList" resultMap="entityBeanResult" >
        SELECT
            stockcontrol.id,
            stock.stockkey,
            sparepart.sparepartkey
        FROM
            stockcontrol
        LEFT JOIN sparepart ON stockcontrol.spid = sparepart.id
        LEFT JOIN stock ON stockcontrol.stockid = stock.id
    </select>

	<insert id="batchInsert" parameterType="java.util.List">
		insert into
		<include refid="table_name"/>
			(
				spid,
				stockid,
				qty,
				orgid,
				averagepricestock,
				createdate,
				tombstone
			)
		values
		<foreach collection="list" separator="," index="i" item="item">
			(
				#{item.spid},
				#{item.stockid},
				#{item.qty},
				#{item.orgid},
				#{item.averagepricestock},
				#{item.createdate},
				1
			)
		</foreach>
	</insert>

	<update id="batchUpdate" parameterType="java.util.List">
		UPDATE
		<include refid="table_name"/>
		SET <include refid="table_name"/>.qty =
		<foreach collection="list" item="item" index="index" separator=" " open="case id" close="end">
			WHEN #{item.id,jdbcType=INTEGER} THEN #{item.qty,jdbcType=DECIMAL}
		</foreach>
		,<include refid="table_name"/>.modificationdate =
		<foreach collection="list" item="item" index="index" separator=" " open="case id" close="end">
			WHEN #{item.id,jdbcType=INTEGER} THEN #{item.modificationdate,jdbcType=TIMESTAMP}
		</foreach>
		,<include refid="table_name"/>.averagepricestock =
		<foreach collection="list" item="item" index="index" separator=" " open="case id" close="end">
			WHEN #{item.id,jdbcType=INTEGER} THEN #{item.averagepricestock,jdbcType=DECIMAL}
		</foreach>
		,<include refid="table_name"/>.orgid =
		<foreach collection="list" item="item" index="index" separator=" " open="case id" close="end">
			WHEN #{item.id,jdbcType=INTEGER} THEN #{item.orgid,jdbcType=INTEGER}
		</foreach>
		WHERE id IN
		<foreach collection="list" index="index" item="item" open="(" separator="," close=")">
			#{item.id,jdbcType=INTEGER}
		</foreach>
	</update>
</mapper>